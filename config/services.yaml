parameters:

services:
  _defaults:
    autowire: true
    autoconfigure: true

  App\:
    resource: "../src/"
    exclude:
      - "../src/DependencyInjection/"
      - "../src/Entity/"
      - "../src/Kernel.php"

  App\EventListener\IngredientListener:
    tags:
      - { name: doctrine.orm.entity_listener, event: prePersist, entity: App\Entity\Ingredient }
      - { name: doctrine.orm.entity_listener, event: preUpdate,  entity: App\Entity\Ingredient }

  App\EventListener\IngredientSlugListener:
    class: App\EventListener\IngredientSlugListener
    tags:
      - { name: doctrine.orm.entity_listener, event: prePersist, entity: App\Entity\Ingredient }
      - { name: doctrine.orm.entity_listener, event: preUpdate, entity: App\Entity\Ingredient }

  # âœ… NEW: Block unverified users
  App\EventListener\IsVerifiedListener:
    class: App\EventListener\IsVerifiedListener
    tags:
      - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }
